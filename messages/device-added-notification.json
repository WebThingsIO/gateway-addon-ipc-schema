{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://raw.githubusercontent.com/WebThingsIO/gateway-addon-ipc-schema/master/messages/device-added-notification.json",
  "title": "Device Added Notification",
  "description": "Notification that a new device has been added to an adapter",
  "type": "object",
  "required": [
    "messageType",
    "data"
  ],
  "properties": {
    "messageType": {
      "type": "integer",
      "title": "Message Type",
      "description": "The message type, used by the IPC client and server to differentiate messages",
      "const": 8192
    },
    "data": {
      "type": "object",
      "title": "Device Added Notification Message Data",
      "description": "Message-specific data",
      "required": [
        "pluginId",
        "adapterId",
        "device"
      ],
      "properties": {
        "pluginId": {
          "type": "string",
          "title": "Plugin ID",
          "description": "ID of the plugin"
        },
        "adapterId": {
          "type": "string",
          "title": "Adapter ID",
          "description": "ID of the adapter"
        },
        "device": {
          "type": "object",
          "title": "Device",
          "description": "Description of the device",
          "required": [
            "id"
          ],
          "properties": {
            "@context": {
              "type": "string",
              "title": "Device context",
              "description": "Context of the device"
            },
            "@type": {
              "type": "array",
              "items": {
                "type": "string",
                "title": "Device types",
                "description": "Types of the device"
              }
            },
            "id": {
              "type": "string",
              "title": "Device ID",
              "description": "ID of the device"
            },
            "title": {
              "type": "string",
              "title": "Device title",
              "description": "Title of the Device"
            },
            "description": {
              "type": "string",
              "title": "Device Description",
              "description": "Description of the device"
            },
            "properties": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "type": "object",
                  "title": "Property",
                  "description": "Description of the Property",
                  "required": [
                    "type"
                  ],
                  "properties": {
                    "@type": {
                      "type": "string",
                      "title": "Property type",
                      "description": "The type of the property"
                    },
                    "title": {
                      "type": "string",
                      "title": "Property title",
                      "description": "The title of the property"
                    },
                    "description": {
                      "type": "string",
                      "title": "Property Description",
                      "description": "Description of the property"
                    },
                    "links": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "title": "Property Link",
                        "description": "A property link",
                        "required": [
                          "href"
                        ],
                        "properties": {
                          "href": {
                            "type": "string",
                            "title": "Link href",
                            "description": "The href of the link"
                          },
                          "rel": {
                            "type": "string",
                            "title": "Link rel",
                            "description": "The type of the relationship"
                          },
                          "mediaType": {
                            "type": "string",
                            "title": "Link media type",
                            "description": "The media type of the link"
                          }
                        }
                      }
                    },
                    "type": {
                      "type": "string",
                      "title": "Property value type",
                      "description": "The type of the property value",
                      "enum": [
                        "null",
                        "boolean",
                        "object",
                        "array",
                        "number",
                        "integer",
                        "string"
                      ]
                    },
                    "unit": {
                      "type": "string",
                      "title": "Property unit",
                      "description": "The unit of the property"
                    },
                    "minimum": {
                      "type": "number",
                      "title": "Property minimum value",
                      "description": "The minimum value of the property"
                    },
                    "maximum": {
                      "type": "number",
                      "title": "Property maximum value",
                      "description": "The maximum value of the property"
                    },
                    "multipleOf": {
                      "type": "number",
                      "title": "Property value precision",
                      "description": "The precision of the value"
                    },
                    "enum": {
                      "type": "array",
                      "items": {
                        "title": "Property values enum",
                        "description": "The possible values of the property",
                        "oneOf": [
                          {
                            "type": "null"
                          },
                          {
                            "type": "boolean"
                          },
                          {
                            "type": "object"
                          },
                          {
                            "type": "array"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "integer"
                          },
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "readOnly": {
                      "type": "boolean",
                      "title": "Property read-only",
                      "description": "If the property is read-only"
                    },
                    "visible": {
                      "type": "boolean",
                      "title": "Property visible",
                      "description": "If the property is visible"
                    }
                  }
                }
              }
            },
            "actions": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "type": "object",
                  "title": "Action",
                  "description": "Description of the Action",
                  "properties": {
                    "@type": {
                      "type": "string",
                      "title": "Action type",
                      "description": "The type of the action"
                    },
                    "title": {
                      "type": "string",
                      "title": "Action title",
                      "description": "The title of the Action"
                    },
                    "description": {
                      "type": "string",
                      "title": "Action Description",
                      "description": "Description of the Action"
                    },
                    "links": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "title": "Action Link",
                        "description": "An action link",
                        "required": [
                          "href"
                        ],
                        "properties": {
                          "href": {
                            "type": "string",
                            "title": "Link href",
                            "description": "The href of the link"
                          },
                          "rel": {
                            "type": "string",
                            "title": "Link rel",
                            "description": "The type of the relationship"
                          },
                          "mediaType": {
                            "type": "string",
                            "title": "Link media type",
                            "description": "The media type of the link"
                          }
                        }
                      }
                    },
                    "input": {
                      "oneOf": [
                        {
                          "type": "object",
                          "title": "Object action input",
                          "description": "An object action input",
                          "required": [
                            "type",
                            "properties"
                          ],
                          "properties": {
                            "type": {
                              "type": "string",
                              "title": "Object input type",
                              "description": "The type of the input",
                              "enum": [
                                "object"
                              ]
                            },
                            "properties": {
                              "type": "object",
                              "title": "Action input properties",
                              "description": "A map of action input properties",
                              "patternProperties": {
                                ".*": {
                                  "type": "object",
                                  "title": "Action input property",
                                  "description": "An action input property",
                                  "properties": {
                                    "@type": {
                                      "type": "string",
                                      "title": "Input property type",
                                      "description": "The type of the input property"
                                    },
                                    "type": {
                                      "type": "string",
                                      "title": "Input property value type",
                                      "description": "The type of the input property value",
                                      "enum": [
                                        "null",
                                        "boolean",
                                        "object",
                                        "array",
                                        "number",
                                        "integer",
                                        "string"
                                      ]
                                    },
                                    "unit": {
                                      "type": "string",
                                      "title": "Input property unit",
                                      "description": "The unit of the input property"
                                    },
                                    "minimum": {
                                      "type": "number",
                                      "title": "Input property minimum value",
                                      "description": "The minimum value of the input property"
                                    },
                                    "maximum": {
                                      "type": "number",
                                      "title": "Input property maximum value",
                                      "description": "The maximum value of the input property"
                                    },
                                    "multipleOf": {
                                      "type": "number",
                                      "title": "Input property value precision",
                                      "description": "The precision of the value"
                                    },
                                    "enum": {
                                      "type": "array",
                                      "items": {
                                        "title": "Property values enum",
                                        "description": "The possible values of the property",
                                        "oneOf": [
                                          {
                                            "type": "null"
                                          },
                                          {
                                            "type": "boolean"
                                          },
                                          {
                                            "type": "object"
                                          },
                                          {
                                            "type": "array"
                                          },
                                          {
                                            "type": "number"
                                          },
                                          {
                                            "type": "integer"
                                          },
                                          {
                                            "type": "string"
                                          }
                                        ]
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          }
                        },
                        {
                          "type": "object",
                          "title": "Primitive action input property",
                          "description": "An primitive action input property",
                          "properties": {
                            "@type": {
                              "type": "string",
                              "title": "Input property type",
                              "description": "The type of the input property"
                            },
                            "type": {
                              "type": "string",
                              "title": "Input property value type",
                              "description": "The type of the input property value",
                              "enum": [
                                "boolean",
                                "number",
                                "integer",
                                "string"
                              ]
                            },
                            "unit": {
                              "type": "string",
                              "title": "Input property unit",
                              "description": "The unit of the input property"
                            },
                            "minimum": {
                              "type": "number",
                              "title": "Input property minimum value",
                              "description": "The minimum value of the input property"
                            },
                            "maximum": {
                              "type": "number",
                              "title": "Input property maximum value",
                              "description": "The maximum value of the input property"
                            },
                            "multipleOf": {
                              "type": "number",
                              "title": "Input property value precision",
                              "description": "The precision of the value"
                            },
                            "enum": {
                              "type": "array",
                              "items": {
                                "title": "Property values enum",
                                "description": "The possible values of the property",
                                "oneOf": [
                                  {
                                    "type": "null"
                                  },
                                  {
                                    "type": "boolean"
                                  },
                                  {
                                    "type": "object"
                                  },
                                  {
                                    "type": "array"
                                  },
                                  {
                                    "type": "number"
                                  },
                                  {
                                    "type": "integer"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              }
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              }
            },
            "events": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "type": "object",
                  "title": "Event",
                  "description": "Description of the event",
                  "properties": {
                    "@type": {
                      "type": "string",
                      "title": "Event type",
                      "description": "The type of the event"
                    },
                    "name": {
                      "type": "string",
                      "title": "Event name",
                      "description": "The name of the event"
                    },
                    "title": {
                      "type": "string",
                      "title": "Event title",
                      "description": "The title of the event"
                    },
                    "description": {
                      "type": "string",
                      "title": "Event Description",
                      "description": "Description of the event"
                    },
                    "links": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "title": "Event Link",
                        "description": "An event link",
                        "required": [
                          "href"
                        ],
                        "properties": {
                          "href": {
                            "type": "string",
                            "title": "Link href",
                            "description": "The href of the link"
                          },
                          "rel": {
                            "type": "string",
                            "title": "Link rel",
                            "description": "The type of the relationship"
                          },
                          "mediaType": {
                            "type": "string",
                            "title": "Link media type",
                            "description": "The media type of the link"
                          }
                        }
                      }
                    },
                    "type": {
                      "type": "string",
                      "title": "Event value type",
                      "description": "The type of the event value",
                      "enum": [
                        "null",
                        "boolean",
                        "object",
                        "array",
                        "number",
                        "integer",
                        "string"
                      ]
                    },
                    "unit": {
                      "type": "string",
                      "title": "Event unit",
                      "description": "The unit of the event"
                    },
                    "minimum": {
                      "type": "number",
                      "title": "Event minimum value",
                      "description": "The minimum value of the event"
                    },
                    "maximum": {
                      "type": "number",
                      "title": "Event maximum value",
                      "description": "The maximum value of the event"
                    },
                    "multipleOf": {
                      "type": "number",
                      "title": "Event value precision",
                      "description": "The precision of the value"
                    },
                    "enum": {
                      "type": "array",
                      "items": {
                        "title": "Property values enum",
                        "description": "The possible values of the property",
                        "oneOf": [
                          {
                            "type": "null"
                          },
                          {
                            "type": "boolean"
                          },
                          {
                            "type": "object"
                          },
                          {
                            "type": "array"
                          },
                          {
                            "type": "number"
                          },
                          {
                            "type": "integer"
                          },
                          {
                            "type": "string"
                          }
                        ]
                      }
                    }
                  }
                }
              }
            },
            "links": {
              "type": "array",
              "items": {
                "type": "object",
                "title": "Device Link",
                "description": "A device link",
                "required": [
                  "href"
                ],
                "properties": {
                  "href": {
                    "type": "string",
                    "title": "Link href",
                    "description": "The href of the link"
                  },
                  "rel": {
                    "type": "string",
                    "title": "Link rel",
                    "description": "The type of the relationship"
                  },
                  "mediaType": {
                    "type": "string",
                    "title": "Link media type",
                    "description": "The media type of the link"
                  }
                }
              }
            },
            "baseHref": {
              "type": "string",
              "title": "Device base href",
              "description": "The base href of the device"
            },
            "pin": {
              "type": "object",
              "title": "Device Pin",
              "description": "The pin of the device",
              "required": [
                "required"
              ],
              "properties": {
                "required": {
                  "type": "boolean",
                  "title": "Pin required",
                  "description": "If the pin is required"
                },
                "pattern": {
                  "type": "string",
                  "title": "Pin pattern",
                  "description": "The pattern of the pin"
                }
              }
            },
            "credentialsRequired": {
              "type": "boolean",
              "title": "Device credentials required",
              "description": "If credentials are required"
            }
          }
        }
      }
    }
  }
}
